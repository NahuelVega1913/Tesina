<div
  class="bg-gradient-to-tr from-sky-700 to-sky-200 min-h-screen flex flex-col justify-center align-middle h-full p-5 md:p-10"
>
  <div
    class="bg-sky-100 md:w-4/5 w-1/1 mx-auto flex flex-col h-full rounded-xl border-rounded-lg shadow-lg shadow-sky-950/50"
  >
    <p
      class="font-bold text-2xl text-sky-950 text-5xl text-center pt-5 sm:mb-5 md:mt-5"
    >
      Modificar Repuesto
    </p>
    <form [formGroup]="form" (submit)="save()" class="p-10">
      <div class="grid gap-6 mb-6 md:grid-cols-2">
        <div>
          <label
            for="first_name"
            class="block mb-2 text-sm font-medium text-sky-950"
            >Nombre</label
          >
          <input
            type="text"
            formControlName="name"
            id="first_name"
            class="bg-gray-50 border border-gray-300 text-black text-sm rounded-lg focus:ring-sky-300 focus:border-sky-400 block w-full p-2.5"
            placeholder="Aceite 900 ml"
            required
          />
          @if(form.get('name')?.invalid && form.get('name')?.touched){
          <div class="text-red-500">Complete el nombre</div>
          }
        </div>
        <div>
          <label
            for="website-admin"
            class="block mb-2 text-sm font-medium text-sky-950"
            >Precio</label
          >
          <div class="flex">
            <span
              class="inline-flex items-center px-3 text-sm text-gray-900 bg-gray-200 border rounded-e-0 border-gray-300 border-e-0 rounded-s-md"
            >
              <svg
                class="w-6 h-6 text-gray-800"
                aria-hidden="true"
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                fill="none"
                viewBox="0 0 24 24"
              >
                <path
                  stroke="currentColor"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M8 17.345a4.76 4.76 0 0 0 2.558 1.618c2.274.589 4.512-.446 4.999-2.31.487-1.866-1.273-3.9-3.546-4.49-2.273-.59-4.034-2.623-3.547-4.488.486-1.865 2.724-2.899 4.998-2.31.982.236 1.87.793 2.538 1.592m-3.879 12.171V21m0-18v2.2"
                />
              </svg>
            </span>
            <input
              type="number"
              id="website-admin"
              formControlName="price"
              class="rounded-none rounded-e-lg bg-gray-50 border text-gray-900 focus:ring-blue-500 focus:border-blue-500 block flex-1 min-w-0 w-full text-sm border-gray-300 p-2.5"
              placeholder="100000"
              required=""
            />
          </div>
          @if(form.get('price')?.invalid && form.get('price')?.touched){
          <div class="text-red-500">Complete el Precio</div>
          }
        </div>
        <div>
          <label
            for="company"
            class="block mb-2 text-sm font-medium text-sky-950"
            >Descuento (%)</label
          >
          <input
            type="number"
            [ngClass]="{
              'is-invalid':
                form.get('email')?.touched && form.get('email')?.invalid
            }"
            formControlName="discaunt"
            id="company"
            class="bg-gray-50 border border-gray-300 text-black text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
            placeholder="0"
            required
          />
          @if(form.get('discaunt')?.invalid && form.get('discaunt')?.touched &&
          form.get('discaunt')?.value == ""){
          <div class="text-red-500">Complete el descuento</div>
          } @else if(form.get('discaunt')?.value > 100){
          <div class="text-red-500">El numero maximo es 100</div>
          } @else if(form.get('discaunt')?.value < 0){
          <div class="text-red-500">No se permiten valores negativos</div>
          }@else if(form.get('discaunt')?.invalid &&
          form.get('discaunt')?.touched){
          <div class="text-red-500">Complete el descuento</div>
          }
        </div>

        <div>
          <label
            for="phone"
            class="block mb-2 text-sm font-medium text-sky-950 j"
            >Stock</label
          >
          <input
            type="number"
            [ngClass]="{
              'is-    invalid':
                form.get('phone')?.touched && form.get('phone')?.invalid
            }"
            formControlName="stock"
            id="phone"
            class="bg-gray-50 border border-gray-300 text-black text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 inline w-full p-2.5"
            placeholder="50"
            required
          />
          @if(form.get('stock')?.invalid && form.get('stock')?.touched &&
          form.get('stock')?.value == ""){
          <div class="text-red-500">Complete el stock</div>
          } @else if(form.get('stock')?.value < 0){
          <div class="text-red-500">No se permiten valores negativos</div>
          }@else if (form.get('stock')?.invalid && form.get('stock')?.touched){
          <div class="text-red-500">Complete el stock</div>

          }
        </div>
      </div>
      <div
        class="flex flex-col md:flex-row m w-full gap-10 mb-6 md:grid-cols-2 justify-between"
      >
        <div class="w-full">
          <label
            for="company"
            class="block mb-2 text-sm font-medium text-sky-950"
            >Marca</label
          >
          <input
            type="text"
            [ngClass]="{
              'is-invalid':
                form.get('city')?.touched && form.get('city')?.invalid
            }"
            formControlName="brand"
            placeholder="Bosh"
            id="phone"
            class="bg-gray-50 border border-gray-300 text-black text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full md:w-80 p-2.5"
            required
          />
          @if(form.get('brand')?.value == "" && form.get('brand')?.touched){
          <div class="text-red-500">Complete la Marca</div>
          }
        </div>
        <div class="w-full">
          <label
            for="company"
            class="block mb-2 text-sm font-medium text-sky-950"
            >Categoría</label
          >
          <select
            id="countries"
            formControlName="category"
            class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 inline w-full md:w-80 p-2.5"
          >
            <option value="" selected>Elige una categoria</option>
            <option value="MOTOR">Motor</option>
            <option value="REFRIGERACION">Refrigeracion</option>
            <option value="LUBRICACION">Lubricacion</option>
          </select>
          @if(form.get('category')?.value == "" &&
          form.get('category')?.touched){
          <div class="text-red-500">Seleccione la categoria</div>
          }
        </div>

        <div class="w-full">
          <label
            for="phone"
            class="block mb-2 text-sm font-medium text-sky-950 j"
            >Estrellas (0-5)</label
          >
          <input
            type="number"
            [ngClass]="{
              'is-invalid':
                form.get('stars')?.touched && form.get('stars')?.invalid
            }"
            formControlName="stars"
            placeholder="5"
            id="phone"
            class="bg-gray-50 border border-gray-300 text-black text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full md:w-80 p-2.5"
            required
          />
          @if(form.get('stars')?.invalid && form.get('stars')?.touched &&
          form.get('stars')?.value == ""){
          <div class="text-red-500">Complete las estrellas</div>
          }@else if(form.get('stars')?.value > 5){
          <div class="text-red-500">El numero maximo es 5</div>
          }@else if(form.get('stars')?.value < 0){
          <div class="text-red-500">No se permiten valores negativos</div>
          }@else if(form.get('stars')?.invalid && form.get('stars')?.touched){
          <div class="text-red-500">Complete las estrellas</div>

          }
        </div>
      </div>
      <div
        class="flex flex-col md:flex-row m w-full gap-10 mb-6 md:grid-cols-2"
      >
        <div class="w-full">
          <label
            for="company"
            class="block mb-2 text-sm font-medium text-sky-950"
            >Imágenes</label
          >
          <input
            class="block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 focus:outline-none"
            id="multiple_files"
            (change)="onFileChange($event)"
            type="file"
            multiple
          />
          <div class="flex flex-row">
            <!-- Imagen 1 -->
            @if(selectedFiles[0]) {
            <div class="relative h-20 w-20 mt-2 ms-2">
              <img
                [src]="getImageUrl(selectedFiles[0])"
                class="h-20 w-20 rounded-2xl"
                alt=""
              />
              <button
                type="button"
                class="absolute top-0 right-0 bg-red-600 text-white rounded-full w-6 h-6 flex items-center justify-center shadow hover:bg-red-800"
                (click)="eliminarImagen(0)"
                style="transform: translate(30%, -30%)"
              >
                &times;
              </button>
            </div>
            }
            <!-- Imagen 2 -->
            @if(selectedFiles[1]) {
            <div class="relative h-20 w-20 mt-2 ms-2">
              <img
                [src]="getImageUrl(selectedFiles[1])"
                class="h-20 w-20 rounded-2xl"
                alt=""
              />
              <button
                type="button"
                class="absolute top-0 right-0 bg-red-600 text-white rounded-full w-6 h-6 flex items-center justify-center shadow hover:bg-red-800"
                (click)="eliminarImagen(1)"
                style="transform: translate(30%, -30%)"
              >
                &times;
              </button>
            </div>
            }
            <!-- Imagen 3 -->
            @if(selectedFiles[2]) {
            <div class="relative h-20 w-20 mt-2 ms-2">
              <img
                [src]="getImageUrl(selectedFiles[2])"
                class="h-20 w-20 rounded-2xl"
                alt=""
              />
              <button
                type="button"
                class="absolute top-0 right-0 bg-red-600 text-white rounded-full w-6 h-6 flex items-center justify-center shadow hover:bg-red-800"
                (click)="eliminarImagen(2)"
                style="transform: translate(30%, -30%)"
              >
                &times;
              </button>
            </div>
            }
            <!-- Imagen 4 -->
            @if(selectedFiles[3]) {
            <div class="relative h-20 w-20 mt-2 ms-2">
              <img
                [src]="getImageUrl(selectedFiles[3])"
                class="h-20 w-20 rounded-2xl"
                alt=""
              />
              <button
                type="button"
                class="absolute top-0 right-0 bg-red-600 text-white rounded-full w-6 h-6 flex items-center justify-center shadow hover:bg-red-800"
                (click)="eliminarImagen(3)"
                style="transform: translate(30%, -30%)"
              >
                &times;
              </button>
            </div>
            }
          </div>
        </div>
        <div class="w-full">
          <label
            for="company"
            class="block mb-2 text-sm font-medium text-sky-950"
            >Proveedor</label
          >
          <select
            id="countries"
            formControlName="provider"
            class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 inline w-full md:w-80 p-2.5"
          >
            <option value="" selected>Elige una categoria</option>
            @for (item of lstProviders; track $index) {
            <option value="{{ item.id }}">{{ item.name }}</option>
            }
          </select>
          @if(form.get('provider')?.value == "" &&
          form.get('provider')?.touched){
          <div class="text-red-500">Seleccione el proveedor</div>
          }
        </div>
      </div>

      <label
        for="message"
        class="block mb-2 mt-3 text-sm font-medium text-sky-950"
        >Descripción</label
      >
      <textarea
        id="message"
        rows="4"
        formControlName="description"
        class="block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500"
        placeholder="Escribe tu mensaje aqui..."
        required=""
      ></textarea>
      @if(form.get('description')?.invalid && form.get('description')?.touched){
      <div class="text-red-500 mb-3">Complete la descripcion</div>
      }

      <button
        type="submit"
        class="text-white bg-sky-800 hover:bg-sky-400 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center mt-3"
      >
        Crear
      </button>
    </form>
  </div>
</div>
